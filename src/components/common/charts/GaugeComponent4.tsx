import { IDynamicGaugeSVGProps } from "@/types/index";
import "./style.css";

const BASE_1 =
  "M9.67745 155.846C7.57643 156.529 5.31299 155.38 4.70073 153.258C-0.168841 136.376 -1.27625 118.614 1.4774 101.228C4.23105 83.842 10.7731 67.2913 20.6211 52.7405C21.8593 50.911 24.3668 50.5184 26.154 51.8169L43.9524 64.7482C45.7396 66.0467 46.1278 68.5434 44.91 70.3866C37.8334 81.097 33.121 93.2114 31.108 105.921C29.0951 118.63 29.8332 131.608 33.2538 143.981C33.8424 146.11 32.7017 148.365 30.6007 149.048L9.67745 155.846Z";
const BASE_2 =
  "M26.2103 51.7395C24.4242 50.4395 24.0248 47.9331 25.3836 46.1912C36.1419 32.4 49.7961 21.1138 65.4005 13.1408C81.0049 5.16772 98.1513 0.716345 115.631 0.0795569C117.839 -0.000869734 119.636 1.79142 119.642 4.00055L119.71 26.0004C119.717 28.2096 117.931 29.9967 115.724 30.1016C102.961 30.7087 90.4563 34.0278 79.0504 39.8556C67.6445 45.6834 57.6279 53.8713 49.6571 63.8584C48.279 65.5851 45.7842 65.9854 43.998 64.6854L26.2103 51.7395Z";
const BASE_3 =
  "M120 4C120 1.79086 121.792 -0.0069627 123.999 0.0666578C141.56 0.652188 158.795 5.08781 174.479 13.0792C190.163 21.0706 203.882 32.4069 214.677 46.2694C216.035 48.0123 215.633 50.5184 213.846 51.8169L196.048 64.7482C194.26 66.0467 191.766 65.6443 190.389 63.9166C182.39 53.8766 172.325 45.6513 160.859 39.8094C149.394 33.9675 136.823 30.6592 123.999 30.0889C121.792 29.9907 120 28.2091 120 26V4Z";
const BASE_4 =
  "M213.876 51.8583C215.664 50.5606 218.171 50.9544 219.409 52.7844C229.25 67.3395 235.785 83.8931 238.531 101.28C241.277 118.667 240.162 136.429 235.285 153.309C234.671 155.431 232.407 156.578 230.307 155.895L209.386 149.087C207.286 148.404 206.146 146.148 206.736 144.019C210.162 131.648 210.906 118.671 208.898 105.96C206.891 93.2498 202.184 81.1333 195.112 70.4198C193.895 68.5761 194.284 66.0795 196.072 64.7818L213.876 51.8583Z";

const ARROW_1 =
  "M11.6389 101.151L121.773 122.93C126.02 123.77 128.671 128.028 127.55 132.21C126.429 136.392 122.005 138.753 117.907 137.357L11.6389 101.151Z";
const ARROW_2 =
  "M74.3709 27.6992L126.755 126.995C128.775 130.824 127.134 135.564 123.179 137.325C119.224 139.086 114.604 137.133 113.11 133.07L74.3709 27.6992Z";
const ARROW_3 =
  "M165.631 27.6973L126.891 133.068C125.397 137.132 120.777 139.084 116.822 137.323C112.867 135.562 111.227 130.822 113.247 126.993L165.631 27.6973Z";
const ARROW_4 =
  "M228.365 101.146L122.097 137.352C117.999 138.748 113.575 136.387 112.454 132.205C111.334 128.023 113.985 123.765 118.232 122.925L228.365 101.146Z";

const clamp14 = (n: number) => Math.max(1, Math.min(4, n));

const GaugeComponent4: React.FC<IDynamicGaugeSVGProps> = ({
  value = 1,
  height = 157,
  className,
  colorPallet,
}) => {
  const v = clamp14(Math.round(Number(value) || 1));

  const INDICATOR_MAP = {
    1: ARROW_1,
    2: ARROW_2,
    3: ARROW_3,
    4: ARROW_4,
  } as const;

  const INDICATOR_D = INDICATOR_MAP[v as keyof typeof INDICATOR_MAP] ?? ARROW_4;

  return (
    <svg
      width="100%"
      height={height}
      viewBox="0 0 240 157"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
      className={className}
      aria-label={`gauge-${v}`}
    >
      <path d={BASE_1} fill={colorPallet[0]} />
      <path d={BASE_2} fill={colorPallet[1]} />
      <path d={BASE_3} fill={colorPallet[2]} />
      <path d={BASE_4} fill={colorPallet[3]} />

      <path d={INDICATOR_D} fill="#2466A8" />
    </svg>
  );
};

export default GaugeComponent4;
