import React from "react";
import { IDynamicGaugeSVGProps } from "@/types/index";
import "./style.css";

const BASE_LEFT =
  "M9.67745 155.846C7.57643 156.529 5.31291 155.38 4.70063 153.258C-1.936 130.25 -1.54514 105.749 5.87321 82.918C13.2916 60.0866 27.3766 40.0352 46.2691 25.3229C48.0121 23.9655 50.5184 24.3668 51.8169 26.154L64.7482 43.9524C66.0467 45.7396 65.6441 48.2343 63.9163 49.6109C50.1419 60.5856 39.8654 75.3829 34.4049 92.1885C28.9445 108.994 28.5607 127.006 33.2537 143.981C33.8423 146.11 32.7017 148.365 30.6007 149.048L9.67745 155.846Z";
const BASE_MID =
  "M51.7427 26.208C50.4428 24.4218 50.8336 21.9139 52.6621 20.6742C72.4819 7.23705 95.8987 0.019051 119.905 3.76372e-05C143.911 -0.0189757 167.339 7.16192 187.18 20.5676C189.011 21.8044 189.406 24.3117 188.109 26.1L175.192 43.9086C173.894 45.6969 171.398 46.0869 169.554 44.8705C154.852 35.1733 137.599 29.986 119.929 30C102.258 30.014 85.0137 35.2286 70.3274 44.9491C68.4852 46.1684 65.9879 45.7823 64.688 43.9961L51.7427 26.208Z";
const BASE_RIGHT =
  "M187.429 26.8108C188.713 25.0132 191.216 24.5918 192.97 25.9351C211.98 40.4956 226.225 60.4335 233.826 83.2047C241.427 105.976 242.014 130.473 235.562 153.533C234.967 155.66 232.713 156.827 230.606 156.161L209.629 149.53C207.523 148.865 206.364 146.619 206.936 144.485C211.493 127.473 210.964 109.465 205.369 92.7036C199.774 75.9423 189.38 61.2278 175.518 50.3638C173.779 49.0011 173.356 46.5098 174.641 44.7122L187.429 26.8108Z";

const ARROW_LEFT =
  "M22.8457 74.0943L123.59 123.636C127.475 125.546 128.933 130.345 126.769 134.094C124.604 137.844 119.719 138.98 116.122 136.57L22.8457 74.0943Z";
const ARROW_CENTER =
  "M120 17.999L127.468 130.017C127.756 134.337 124.329 137.999 120 137.999C115.671 137.999 112.244 134.337 112.532 130.017L120 17.999Z";
const ARROW_RIGHT =
  "M217.156 74.0893L123.88 136.566C120.283 138.975 115.398 137.839 113.233 134.089C111.068 130.34 112.527 125.541 116.412 123.631L217.156 74.0893Z";

const clamp13 = (n: number) => Math.max(1, Math.min(3, n));

const GaugeComponent3: React.FC<IDynamicGaugeSVGProps> = ({
  value = 1,
  height = 157,
  className,
  colorPallet,
}) => {
  const v = clamp13(Math.round(Number(value) || 1));

  const indicatorD =
    v === 1 ? ARROW_LEFT : v === 2 ? ARROW_CENTER : ARROW_RIGHT;

  return (
    <svg
      width="100%"
      height={height}
      viewBox="0 0 240 157"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
      className={className}
      aria-label={`gauge-${v}`}
      role="img"
    >
      <path d={BASE_LEFT} fill={colorPallet[0]} />
      <path d={BASE_MID} fill={colorPallet[1]} />
      <path d={BASE_RIGHT} fill={colorPallet[2]} />

      <path d={indicatorD} fill="#2466A8" />
    </svg>
  );
};

export default GaugeComponent3;
